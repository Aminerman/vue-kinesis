var VueKinesis=function(t){"use strict";function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function i(t){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?n(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var a={props:{type:{type:String,default:"translate"},transformOrigin:{type:String,default:"center"},originX:{type:Number,default:50},originY:{type:Number,default:50},strength:{type:Number,default:10},audioIndex:{type:Number,default:50},axis:{type:String,default:null},maxX:{type:Number,default:null},maxY:{type:Number,default:null},minX:{type:Number,default:null},minY:{type:Number,default:null},cycle:{type:Number,default:0}},methods:{strengthManager:function(){return"depth"===this.type||"depth_inv"===this.type?Math.abs(this.strength):this.strength}}},s={name:"KinesisAudio",inject:["context"],mixins:[a],props:{tag:{type:String,default:"div"},audioIndex:{type:Number,default:50}},computed:{transform:function(){return this.transformAudio()},transformParameters:function(){return{transitionProperty:"transform",transitionDuration:this.transitionDuration,transformOrigin:this.transformOrigin,transitionTimingFunction:this.transitionTimingFunction}},transitionDuration:function(){var t=this.context.duration;return"".concat(t,"ms")},transitionTimingFunction:function(){return this.context.easing}},methods:{transformAudio:function(){var t=this.context.audioData;if(this.context.audioData){var e,n,i=this.type,r=this.strength;switch(i){case"translate":e=t?t[0][this.audioIndex]:0,n="translate3d(".concat(e*r,"px, 0, 0)");break;case"rotate":e=t?t[0][this.audioIndex]:0,n="rotate3d(0,0,1,".concat(e*r/10,"deg)");break;case"scale":e=t?t[0][this.audioIndex]/r<1?1:t[0][this.audioIndex]/(2*r):1,n="scale(".concat(e,")")}return{transform:n}}}}};function u(t){return t.bottom>=0&&t.right>=0&&t.top<=(window.innerHeight||document.documentElement.clientHeight)&&t.left<=(window.innerWidth||document.documentElement.clientWidth)}function c(t,e,n){var i,r;return function(){var o,a=this;o="scroll"===n||a.duration>1e3?e:a.duration/10;var s=+new Date,u=arguments;i&&s<i+o?(clearTimeout(r),r=setTimeout((function(){requestAnimationFrame((function(){i=s,t.apply(a,u)}))}),o)):requestAnimationFrame((function(){i=s,t.apply(a,u)}))}}s.render=function(e,n,r,o,a,s){return t.openBlock(),t.createBlock(t.resolveDynamicComponent(r.tag),{style:i(i({},s.transform),s.transformParameters)},{default:t.withCtx((function(){return[t.renderSlot(e.$slots,"default")]})),_:3},8,["style"])};var h={props:{active:{type:Boolean,default:!0},duration:{type:Number,default:1e3},easing:{type:String,default:"cubic-bezier(0.23, 1, 0.32, 1)"},tag:{type:String,default:"div"}}},l={props:{perspective:{type:Number,default:1e3}},computed:{style:function(){return{perspective:"".concat(this.perspective,"px")}}}};function d(){try{return/Mobi|Android/i.test(navigator.userAgent)}catch(t){return!0}}function m(t,e){return{x:t,y:e}}function f(t){var e,n=t.target,r=t.event,o=r.clientX,a=r.clientY,s=o-n.left,u=a-n.top,c=m((e=n)?e.width/2:0,e?e.height/2:0);return i(i({},m(s/c.x,u/c.y)),{},{target:n})}var v={name:"KinesisContainer",mixins:[h,l,{props:{audio:{type:String,required:!1},playAudio:{type:Boolean,default:!1}},data:function(){return{analyser:null,audioArray:null,audioData:null,audioRef:null,wasPlayed:!1,isPlaying:!1}},watch:{audio:function(){this.wasPlayed=!1,this.isPlaying=!1},playAudio:function(t){t?this.play():this.stop()}},methods:{play:function(){this.active&&(this.wasPlayed||(this.handleAudio(),this.wasPlayed=!0),this.isPlaying=!0,this.audioRef.play(),this.getSongData())},stop:function(){this.isPlaying=!1,this.audioRef.pause()},handleAudio:function(){var t=this.$refs.audio;this.audioRef=t;var e=new AudioContext,n=e.createMediaElementSource(t),i=e.createAnalyser();n.connect(i),i.connect(e.destination),i.fftSize=256;var r=i.frequencyBinCount,o=new Uint8Array(r);this.audioArray=o,this.analyser=i},getSongData:function(){this.isPlaying&&(this.analyser.getByteFrequencyData(this.audioArray),this.audioData=new Array(this.audioArray),requestAnimationFrame(this.getSongData))}}},{props:{event:{type:String,default:"move"}},data:function(){return{eventMap:{orientation:"deviceorientation",scroll:"scroll",move:d()?"deviceorientation":null}}},methods:{addEvents:function(){this.eventMap[this.event]&&window.addEventListener(this.eventMap[this.event],this.handleMovement,!0)},removeEvents:function(){this.eventMap[this.event]&&window.removeEventListener(this.eventMap[this.event],this.handleMovement,!0)}},watch:{event:function(t,e){this.eventMap[t]&&window.addEventListener(this.eventMap[t],this.handleMovement,!0),this.eventMap[e]&&window.addEventListener(this.eventMap[e],this.handleMovement,!0)}}}],provide:function(){var t=this,e={};return["audioData","duration","easing","event","eventData","isMoving","movement","shape"].forEach((function(n){return Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})),{context:e}},data:function(){return{movement:{x:0,y:0},isMoving:!1,shape:null,leftOnce:!1,eventData:{x:0,y:0}}},mounted:function(){this.addEvents()},beforeUnmount:function(){this.removeEvents()},methods:{handleMovement:c((function(t){this.isMoving||this.leftOnce||(this.isMoving=!0),this.shape=this.$el.getBoundingClientRect();var e,n=u(this.shape);"move"===this.event&&this.isMoving&&!d()?(this.movement=f({target:this.shape,event:t}),this.eventData=m(t.clientX,t.clientY)):("orientation"===this.event||"move"===this.event&&d())&&n?this.movement=function(t){var e=t.event,n=t.target;return i(i({},m(e.gamma/45,e.beta/90)),{},{target:n})}({target:this.shape,event:t}):"scroll"===this.event&&n&&this.shape.height&&(this.movement=i(i({},m(((e=this.shape).left-window.innerWidth)/(e.width+window.innerWidth),(e.top-window.innerHeight)/(e.height+window.innerHeight))),{},{target:e}))}),100),handleMovementStart:function(){this.isMoving=!0},handleMovementStop:function(){this.leftOnce=!0,this.isMoving=!1}}};v.render=function(e,n,i,r,o,a){return t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.tag),{onMousemove:a.handleMovement,onMouseenter:a.handleMovementStart,onMouseleave:a.handleMovementStop,style:e.style},{default:t.withCtx((function(){return[t.renderSlot(e.$slots,"default"),e.audio?(t.openBlock(),t.createBlock("audio",{key:0,type:"audio/mpeg",onEnded:n[1]||(n[1]=function(){return e.stop&&e.stop.apply(e,arguments)}),ref:"audio"},[t.createVNode("source",{src:e.audio},null,8,["src"])],544)):t.createCommentVNode("",!0)]})),_:3},8,["onMousemove","onMouseenter","onMouseleave","style"])};var p={name:"KinesisDistance",props:{tag:{type:String,default:"div"},type:{type:String,default:"translate"},transformOrigin:{type:String,default:"center"},originX:{type:Number,default:50},originY:{type:Number,default:50},strength:{type:Number,default:10},axis:{type:String,default:null},maxX:{type:Number,default:null},maxY:{type:Number,default:null},minX:{type:Number,default:null},minY:{type:Number,default:null},distance:{type:Number,default:100},cycle:{type:Number,default:0},active:{type:Boolean,default:!0},duration:{type:Number,default:1001},easing:{type:String,default:"cubic-bezier(0.23, 1, 0.32, 1)"},perspective:{type:Number,default:1e3}},data:function(){return{pointer:{x:0,y:0},transform:{},component:"kidistance",throttle:500}},mounted:function(){window.addEventListener("scroll",this.handleMovement)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleMovement)},computed:{style:function(){return{perspective:"".concat(this.perspective,"px")}},transformParameters:function(){return{position:"relative",transitionProperty:"transform",transitionDuration:this.transitionDuration,transformOrigin:this.transformOrigin,transitionTimingFunction:this.easing}},transitionDuration:function(){return"".concat(this.duration,"ms")}},methods:{getCoordinates:function(t,e){var n=this.$el.getBoundingClientRect();return{x:t+n.left,y:e+n.top}},getDistance:function(t,e,n,i){return Math.floor(Math.hypot(e-t,i-n))},handleMovement:c((function(t){window.addEventListener("mousemove",this.handleMovement);var e=this.pointer;e.x=t.clientX,e.y=t.clientY,this.transformBehavior()}),50),transformBehavior:function(){var t=this.$el.getBoundingClientRect(),e=this.getCoordinates(t.width/2,t.height/2),n=this.getDistance(this.pointer.x,e.x,this.pointer.y,e.y);if(n>this.distance)return this.transform={},void(this.throttle=500);this.throttle=50;var i="scale(".concat(n/this.distance,")");this.transform={transform:i}},scaleMovement:function(t,e){var n=this.type,i=Math.sign(this.strength)*(Math.abs(t)+Math.abs(e))/10+1;return"scale3d(".concat("scaleX"===n||"scale"===n?i:1,",\n      ").concat("scaleY"===n||"scale"===n?i:1,",\n      1)")}}};p.render=function(e,n,r,o,a,s){return t.openBlock(),t.createBlock(t.resolveDynamicComponent(r.tag),{style:i(i({},a.transform),s.transformParameters)},{default:t.withCtx((function(){return[t.renderSlot(e.$slots,"default")]})),_:3},8,["style"])};var y={methods:{transformSwitch:function(t,e,n,i){var r;switch(t){case"translate":r=this.translateMovement(e,n);break;case"rotate":r=this.rotateMovement(e,n);break;case"depth":r=this.depthMovement(e,n,i);break;case"depth_inv":r=this.depthMovement(-e,-n,i);break;case"scale":r=this.scaleMovement(e,n)}return r},translateMovement:function(t,e){return"translate3d(".concat(-t,"px, ").concat(-e,"px, 0)")},rotateMovement:function(t,e){var n;return this.axis?"x"===this.axis?n=2*t:"y"===this.axis&&(n=2*e):n=t+e,"rotate3d(0,0,1,".concat(n,"deg)")},depthMovement:function(t,e,n){return"rotateX(".concat(-e,"deg) rotateY(").concat(t,"deg) translate3d(0,0,").concat(2*n,"px)")},scaleMovement:function(t,e){var n=this.type,i=Math.sign(this.strength)*(Math.abs(t)+Math.abs(e))/10+1;return"scale3d(".concat("scaleX"===n||"scale"===n?i:1,",\n            ").concat("scaleY"===n||"scale"===n?i:1,",\n            1)")}}};function g(t){var e=t.y,n=t.x,r=t.target,o=t.originX,a=void 0===o?50:o,s=t.strength,u=void 0===s?10:s,c=t.event,h=void 0===c?null:c,l=t.originY,d=void 0===l?50:l;return"scroll"===h&&(d=-d/2),i(i({},m((n-a/50)*u,(e-d/50)*u)),{},{target:r})}function x(t,e,n){return n&&t>n?n:e&&t<e?e:t}function w(t){var e=t.referencePosition,n=t.elementPosition,i=t.spanningRange,r=t.cycles,o=(e-n)*(2*Math.PI)/i;return i*Math.sin(o*r)/(i/2)}var b={name:"KinesisElement",mixins:[a,y],inject:["context"],props:{tag:{type:String,default:"div"}},computed:{transform:function(){return this.transformMovement()},getContext:function(){return this.context},transformParameters:function(){return{transitionProperty:"transform",transitionDuration:this.transitionDuration,transformOrigin:this.transformOrigin,transitionTimingFunction:this.transitionTimingFunction}},transitionDuration:function(){var t=this.context.duration;return"".concat(t,"ms")},transitionTimingFunction:function(){return this.context.easing},isTouch:function(){return d()}},methods:{transformMovement:function(){var t,e,n=this.context;if(!n.isMoving&&"move"===n.event)return{};var r=n.event,o=this.strengthManager();if(this.cycle<=0){var a=g(i(i({},n.movement),{},{originX:this.originX,originY:this.originY,strength:o})),s=a.x,u=a.y,c="scroll"===r;if(c||(t="y"===this.axis?0:x(s,this.minX,this.maxX),e="x"===this.axis?0:x(u,this.minY,this.maxY)),c){var h=g({x:n.movement.x,y:n.movement.y,originX:this.originX,originY:this.originY,strength:o,event:n.event}).y;t="x"===this.axis?h:0,e="y"!==this.axis&&this.axis?0:h}}else if(this.cycle>0){var l=n.shape,d=n.eventData;if(l)t=("x"===this.axis?w({referencePosition:"scroll"===r?0:d.x,elementPosition:l.left,spanningRange:"scroll"===r?window.innerWidth:l.width,cycles:this.cycle}):0)*o,e=("y"!==this.axis&&this.axis?0:w({referencePosition:"scroll"===r?0:d.y,elementPosition:l.top,spanningRange:"scroll"===r?window.innerHeight:l.height,cycles:this.cycle}))*o}var m=this.type;return m="scaleX"===m||"scaleY"===m?"scale":m,{transform:this.transformSwitch(m,t,e,this.strength)}}}};b.render=function(e,n,r,o,a,s){return t.openBlock(),t.createBlock(t.resolveDynamicComponent(r.tag),{style:i(i({},s.transform),s.transformParameters)},{default:t.withCtx((function(){return[t.renderSlot(e.$slots,"default")]})),_:3},8,["style"])};var M={name:"KinesisScroll",mixins:[h,l,a,y],data:function(){return{transform:{}}},mounted:function(){window.addEventListener("scroll",this.handleScroll,{passive:!0})},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll,{passive:!0})},computed:{transformParameters:function(){return{transitionProperty:"transform",transitionDuration:this.transitionDuration,transformOrigin:this.transformOrigin,transitionTimingFunction:this.easing}},transitionDuration:function(){return"".concat(this.duration,"ms")}},methods:{getCycleMovement:function(t,e,n,i,r){var o=(t-r.left)*(2*Math.PI)/n,a=(e-r.top)*(2*Math.PI)/i;this.cycleMovement={x:o,y:a,width:n,height:i}},handleScroll:c((function(){if(this.active){var t=this.$el.getBoundingClientRect();u(t)&&t.height&&this.transformBehavior(t)}}),19,"scroll"),transformBehavior:function(t){var e,n,i=(t.top-window.innerHeight)/(t.height+window.innerHeight);if(this.cycle<=0){var r=i*this.strength;e="x"===this.axis?r:0,n="y"!==this.axis&&this.axis?0:r,this.maxX&&(e=Math.min(e,this.maxX)),this.minX&&(e=Math.max(e,this.minX)),this.maxY&&(n=Math.min(n,this.maxY)),this.minY&&(n=Math.max(n,this.minY))}else if(this.cycle>0){var o=this.getCycleMovement(0,0,window.innerWidth,window.innerHeight,t),a=o.x,s=o.y,u=o.width,c=o.height,h=u*Math.sin(a*this.cycle),l=c*Math.sin(s*this.cycle);e="x"===this.axis?h/(u/2)*this.strength:0,n="y"!==this.axis&&this.axis?0:l/(c/2)*this.strength}var d=this.type;d="scaleX"===d||"scaleY"===d?"scale":d;var m=this.transformSwitch(d,e,n,this.strength);this.transform={transform:m}}}};M.render=function(e,n,r,o,a,s){return t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.tag),{style:i(i({},a.transform),s.transformParameters)},{default:t.withCtx((function(){return[t.renderSlot(e.$slots,"default")]})),_:3},8,["style"])};var S=function(t){t.component(s.name,s),t.component(v.name,v),t.component(p.name,p),t.component(b.name,b),t.component(M.name,M)},D=Object.freeze({__proto__:null,default:S,KinesisAudio:s,KinesisContainer:v,KinesisDistance:p,KinesisElement:b,KinesisScroll:M});return Object.entries(D).forEach((function(t){var e=r(t,2),n=e[0],i=e[1];"default"!==n&&(S[n]=i)})),S}(Vue);